<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<link rel="icon" type="image/png" href="/icons/favicon.png" />

	<!-- PWA Configuration -->
	<link rel="apple-touch-icon" href="/icons/favicon.png" />
	<link rel="manifest" href="/manifest.webmanifest" />
	<meta name="theme-color" content="#000000" />
	<meta name="mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="default" />
	<meta name="apple-mobile-web-app-title" content="F. Madore" />
	<meta name="application-name" content="F. Madore" />
	<meta name="msapplication-TileColor" content="#000000" />
	<meta name="msapplication-config" content="/browserconfig.xml" />

	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<!-- Security: Content Security Policy -->
	<meta http-equiv="Content-Security-Policy" content="
		default-src 'self';
		script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.google-analytics.com;
		style-src 'self' 'unsafe-inline';
		font-src 'self' https://fonts.gstatic.com;
		img-src 'self' data: https: blob:;
		connect-src 'self' https://www.google-analytics.com https://api.iconify.design https://api.maptiler.com https://zenodo.org;
		frame-ancestors 'none';
		base-uri 'self';
		form-action 'self';
	" />

	<!-- Critical CSS: Inlined to prevent render-blocking and reduce LCP -->
	<!-- Values align with design system: variables.css tokens -->
	<!-- --sys-color-neutral-0: #fff, --sys-color-neutral-800: #1e293b -->
	<!-- --sys-color-neutral-900: #0f172a, --sys-color-neutral-200: #e2e8f0 -->
	<!-- --border-radius-lg: 0.75rem, --glass-blur-sm: 8px (using sm for perf) -->
	<style>
		*,*::before,*::after{box-sizing:border-box}
		html{color-scheme:light dark}
		body{margin:0;min-height:100vh;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;line-height:1.5;background-color:#fff;color:#1e293b}
		html.dark body{background-color:#0f172a;color:#e2e8f0}
		.container{width:100%;max-width:80rem;margin:0 auto;padding:0 1rem}
		img{max-width:100%;height:auto;display:block}
		.grid{display:grid}.grid-cols-1{grid-template-columns:1fr}
		@media(min-width:768px){.md\:grid-cols-3{grid-template-columns:repeat(3,1fr)}.md\:gap-8{gap:2rem}.md\:col-span-2{grid-column:span 2}}
		.flex{display:flex}.items-center{align-items:center}.justify-between{justify-content:space-between}
		.py-8{padding-top:2rem;padding-bottom:2rem}.mt-8{margin-top:2rem}.gap-6{gap:1.5rem}
		header{min-height:64px}
		.glass-card,.glass-panel{background:rgba(255,255,255,0.7);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,0.3);border-radius:0.75rem}
		html.dark .glass-card,html.dark .glass-panel{background:rgba(15,23,42,0.7);border-color:rgba(255,255,255,0.1)}
		.max-w-7xl{max-width:80rem}
	</style>

	<!-- Performance hints -->
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link rel="preconnect" href="https://unpkg.com" crossorigin />
	<link rel="preconnect" href="https://api.iconify.design" crossorigin />
	<link rel="preconnect" href="https://zenodo.org" crossorigin />
	<!-- DNS prefetch as fallback for browsers without preconnect support -->
	<link rel="dns-prefetch" href="https://fonts.gstatic.com" />
	<link rel="dns-prefetch" href="https://api.iconify.design" />
	<!-- Profile picture will be preloaded only on home page where it's needed -->

	<!-- Theme initialization script -->
	<script>
		(function () {
			const theme = localStorage.getItem('theme');
			const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
			const defaultTheme = 'light'; // Default theme if nothing else is set

			let initialTheme = defaultTheme;
			if (theme && ['light', 'dark'].includes(theme)) {
				initialTheme = theme;
			} else if (!theme && prefersDark) {
				initialTheme = 'dark';
			}

			document.documentElement.classList.add(initialTheme);
		})();
	</script>

	%sveltekit.head%
</head>

<body data-sveltekit-preload-data="hover" data-sveltekit-preload-code="hover">
	<div class="sveltekit-body-container">%sveltekit.body%</div>
</body>

</html>