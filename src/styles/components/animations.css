/* ===== MODERN CSS ANIMATION SYSTEM =====
 * CSS-only animations using scroll-driven animations (Chrome 115+, Firefox 110+)
 * Graceful fallbacks ensure content is always visible in unsupported browsers
 * All animations respect prefers-reduced-motion
 */

/* ===== PAGE ENTRY ANIMATIONS ===== */
/* Subtle page load fade for initial content */
.page-enter {
	animation: pageEnter var(--duration-moderate) var(--ease-out) forwards;
}

@keyframes pageEnter {
	from {
		opacity: 0;
		transform: translateY(var(--transform-distance-sm));
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* ===== SCROLL-DRIVEN ENTRY ANIMATIONS =====
 * Uses CSS scroll-driven animations for modern browsers
 * Content is immediately visible in unsupported browsers (graceful degradation)
 */

/* Base class for scroll-animated elements */
.scroll-reveal {
	/* Fallback: content is visible by default */
	opacity: 1;
	transform: translateY(0);
}

/* Apply animation only in browsers that support scroll-driven animations */
@supports (animation-timeline: view()) {
	.scroll-reveal {
		opacity: 0;
		transform: translateY(var(--transform-distance-md));
		animation: scrollReveal linear forwards;
		animation-timeline: view();
		animation-range: entry 0% entry 30%;
	}
}

@keyframes scrollReveal {
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Subtle scale variant for cards */
.scroll-reveal-scale {
	opacity: 1;
	transform: scale(1);
}

@supports (animation-timeline: view()) {
	.scroll-reveal-scale {
		opacity: 0;
		transform: scale(0.96);
		animation: scrollRevealScale linear forwards;
		animation-timeline: view();
		animation-range: entry 0% entry 25%;
	}
}

@keyframes scrollRevealScale {
	to {
		opacity: 1;
		transform: scale(1);
	}
}

/* ===== GRID STAGGER ANIMATION =====
 * Automatic staggered reveal for grid children using :nth-child
 * No JavaScript required - pure CSS with custom property delays
 */

.grid-stagger>* {
	/* Fallback: all items visible */
	opacity: 1;
	transform: translateY(0);
}

@supports (animation-timeline: view()) {
	.grid-stagger>* {
		opacity: 0;
		transform: translateY(var(--transform-distance-md));
		animation: gridItemReveal var(--duration-moderate) var(--ease-out) forwards;
		animation-timeline: view();
		animation-range: entry 0% entry 35%;
	}

	/* Stagger delays using :nth-child */
	.grid-stagger>*:nth-child(1) {
		--stagger-delay: 0ms;
	}

	.grid-stagger>*:nth-child(2) {
		--stagger-delay: var(--stagger-1);
	}

	.grid-stagger>*:nth-child(3) {
		--stagger-delay: var(--stagger-2);
	}

	.grid-stagger>*:nth-child(4) {
		--stagger-delay: var(--stagger-3);
	}

	.grid-stagger>*:nth-child(5) {
		--stagger-delay: var(--stagger-4);
	}

	.grid-stagger>*:nth-child(6) {
		--stagger-delay: var(--stagger-5);
	}

	.grid-stagger>*:nth-child(n+7) {
		--stagger-delay: var(--stagger-6);
	}

	.grid-stagger>* {
		animation-delay: var(--stagger-delay, 0ms);
	}
}

@keyframes gridItemReveal {
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* ===== SKELETON LOADING =====
 * Loading placeholders with shimmer animation for perceived performance
 */
.skeleton {
	background: linear-gradient(90deg,
			color-mix(in srgb, var(--color-surface) 60%, transparent) 0%,
			color-mix(in srgb, var(--color-surface) 90%, transparent) 50%,
			color-mix(in srgb, var(--color-surface) 60%, transparent) 100%);
	background-size: 200% 100%;
	animation: skeletonShimmer 1.5s var(--ease-in-out) infinite;
	border-radius: var(--border-radius);
}

.skeleton-text {
	height: 1em;
	margin-bottom: var(--space-xs);
	border-radius: var(--border-radius-sm);
}

.skeleton-title {
	height: 1.5em;
	width: 60%;
	margin-bottom: var(--space-sm);
}

.skeleton-image {
	aspect-ratio: 16 / 9;
	border-radius: var(--border-radius-md);
}

.skeleton-card {
	padding: var(--space-md);
	border-radius: var(--border-radius-lg);
}

@keyframes skeletonShimmer {
	0% {
		background-position: 200% 0;
	}

	100% {
		background-position: -200% 0;
	}
}

/* Dark mode skeleton */
:global(html.dark) .skeleton {
	background: linear-gradient(90deg,
			color-mix(in srgb, var(--color-surface) 30%, transparent) 0%,
			color-mix(in srgb, var(--color-surface) 50%, transparent) 50%,
			color-mix(in srgb, var(--color-surface) 30%, transparent) 100%);
	background-size: 200% 100%;
}

/* ===== LEGACY ANIMATION CLASSES =====
 * Maintained for backward compatibility
 */

/* Base animation states */
.animate-in {
	opacity: 1 !important;
	transform: none !important;
}

.animate-out {
	opacity: 0 !important;
	transform: translateY(var(--transform-distance-lg)) !important;
}

/* Fade animations */
.fade-in {
	animation: fadeIn var(--anim-duration-base) var(--anim-ease-base) forwards;
}

.fade-in-up {
	animation: fadeInUp var(--anim-duration-base) var(--anim-ease-base) forwards;
}

.fade-in-down {
	animation: fadeInDown var(--anim-duration-base) var(--anim-ease-base) forwards;
}

.fade-in-left {
	animation: fadeInLeft var(--anim-duration-base) var(--anim-ease-base) forwards;
}

.fade-in-right {
	animation: fadeInRight var(--anim-duration-base) var(--anim-ease-base) forwards;
}

/* Scale animations */
.scale-in {
	animation: scaleIn var(--anim-duration-base) var(--anim-ease-base) forwards;
}

.scale-in-center {
	animation: scaleInCenter var(--anim-duration-base) var(--anim-ease-base) forwards;
}

/* Slide animations */
.slide-in-up {
	animation: slideInUp var(--anim-duration-base) var(--anim-ease-base) forwards;
}

.slide-in-down {
	animation: slideInDown var(--anim-duration-base) var(--anim-ease-base) forwards;
}

.slide-in-left {
	animation: slideInLeft var(--anim-duration-base) var(--anim-ease-base) forwards;
}

.slide-in-right {
	animation: slideInRight var(--anim-duration-base) var(--anim-ease-base) forwards;
}

/* Bounce animations */
.bounce-in {
	animation: bounceIn var(--anim-duration-bounce) var(--anim-ease-bounce) forwards;
}

/* Stagger delays for lists */
.stagger-1 {
	animation-delay: var(--anim-delay-1);
}

.stagger-2 {
	animation-delay: var(--anim-delay-2);
}

.stagger-3 {
	animation-delay: var(--anim-delay-3);
}

.stagger-4 {
	animation-delay: var(--anim-delay-4);
}

.stagger-5 {
	animation-delay: var(--anim-delay-5);
}

.stagger-6 {
	animation-delay: var(--anim-delay-6);
}

/* Reading progress bar */
.reading-progress {
	position: fixed;
	top: 0;
	left: 0;
	width: 0%;
	height: var(--space-1);
	background: linear-gradient(90deg,
			var(--color-primary),
			var(--color-highlight),
			var(--color-accent));
	z-index: 1000;
	transition: width var(--anim-duration-progress) var(--anim-ease-out);
}

/* Parallax container */
.parallax-container {
	overflow: hidden;
	position: relative;
}

.parallax-element {
	will-change: transform;
}

/* Keyframe definitions */
@keyframes fadeIn {
	from {
		opacity: 0;
	}

	to {
		opacity: 1;
	}
}

@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(var(--transform-distance-lg));
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes fadeInDown {
	from {
		opacity: 0;
		transform: translateY(calc(-1 * var(--transform-distance-lg)));
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes fadeInLeft {
	from {
		opacity: 0;
		transform: translateX(calc(-1 * var(--transform-distance-lg)));
	}

	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes fadeInRight {
	from {
		opacity: 0;
		transform: translateX(var(--transform-distance-lg));
	}

	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes scaleIn {
	from {
		opacity: 0;
		transform: scale(var(--scale-90));
	}

	to {
		opacity: 1;
		transform: scale(var(--scale-100));
	}
}

@keyframes scaleInCenter {
	from {
		opacity: 0;
		transform: scale(var(--transform-scale-sm)) translateY(var(--transform-distance-md));
	}

	to {
		opacity: 1;
		transform: scale(var(--scale-100)) translateY(0);
	}
}

@keyframes slideInUp {
	from {
		opacity: 0;
		transform: translateY(var(--transform-distance-full));
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slideInDown {
	from {
		opacity: 0;
		transform: translateY(calc(-1 * var(--transform-distance-full)));
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slideInLeft {
	from {
		opacity: 0;
		transform: translateX(calc(-1 * var(--transform-distance-full)));
	}

	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes slideInRight {
	from {
		opacity: 0;
		transform: translateX(var(--transform-distance-full));
	}

	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes bounceIn {
	0% {
		opacity: 0;
		transform: scale(var(--transform-scale-xs)) translateY(var(--transform-distance-lg));
	}

	50% {
		opacity: 1;
		transform: scale(var(--transform-scale-lg)) translateY(calc(-1 * var(--transform-distance-sm)));
	}

	70% {
		transform: scale(var(--transform-scale-md)) translateY(calc(var(--transform-distance-sm) / 2));
	}

	100% {
		opacity: 1;
		transform: scale(var(--scale-100)) translateY(0);
	}
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {

	/* Disable all animations for users who prefer reduced motion */
	.page-enter,
	.scroll-reveal,
	.scroll-reveal-scale,
	.grid-stagger>*,
	.skeleton,
	.fade-in,
	.fade-in-up,
	.fade-in-down,
	.fade-in-left,
	.fade-in-right,
	.scale-in,
	.scale-in-center,
	.slide-in-up,
	.slide-in-down,
	.slide-in-left,
	.slide-in-right,
	.bounce-in {
		animation: none !important;
		opacity: 1 !important;
		transform: none !important;
	}

	.reading-progress {
		transition: none;
	}

	.parallax-element {
		transform: none !important;
	}
}

/* Performance optimizations */
.animate-in,
.animate-out,
[class*='fade-in'],
[class*='scale-in'],
[class*='slide-in'],
.bounce-in,
.scroll-reveal,
.scroll-reveal-scale,
.grid-stagger>* {
	will-change: opacity, transform;
}

/* Remove will-change after animation completes */
.animation-complete {
	will-change: auto;
}

/* Mobile optimizations - reduced distances for better performance */
@media (max-width: 767px) {
	@supports (animation-timeline: view()) {

		.scroll-reveal,
		.grid-stagger>* {
			transform: translateY(var(--transform-distance-sm));
		}
	}
}