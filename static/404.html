<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Redirecting...</title>
		<script>
			// Single Page Apps for GitHub Pages
			// MIT License
			// This script takes the current url and converts the path and query
			// string into just a query string, and then redirects the browser
			// to the new url with only a query string and hash fragment,
			// e.g. https://www.frederickmadore.com/?p=/publications
			// GitHub Pages then redirects to the SvelteKit app which handles
			// the query string.
			var pathSegmentsToKeep = 0; // Set to 0 for root domain

			var l = window.location;
			l.replace(
				l.protocol +
					'//' +
					l.hostname +
					(l.port ? ':' + l.port : '') +
					l.pathname
						.split('/')
						.slice(0, 1 + pathSegmentsToKeep)
						.join('/') +
					'/?p=' + // Keep the leading slash for the path
					l.pathname
						.slice(1)
						.split('/')
						.slice(pathSegmentsToKeep)
						.join('/')
						.replace(/&/g, '~and~') +
					(l.search ? '&q=' + l.search.slice(1).replace(/&/g, '~and~') : '') +
					l.hash
			);
		</script>
	</head>
	<body>
		<h1>Redirecting...</h1>
		<p>If you are not redirected automatically, <a href="/">click here</a>.</p>
	</body>
</html>
